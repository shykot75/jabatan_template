
<div id="Company-registration-form" class="Company-registration-form step-one">
		
		<div class="field">
			<div class="registration-label">
				<label for="registration_no" class="registration-title">SSM Registration Date:</label>
			</div>
			<div class="registration-date input-field">
				<input id="ccmRegDate" name="ccmRegDate" class="ccmRegDate" type="text" size="10" READONLY />
			</div>					
		</div>

		<div class="field" id="reg_no_field">
			<div class="registration-label">
				<label for="registration-no" class="registration-title">SSM Registration No.:</label>
			</div>
			<div class="registration-no input-field">
				<input onCopy="return false" onPaste="return false" name="CCM1" id="CCM1" type="text" maxlength="7" size="10" style="width:55%" onkeypress="return IsAlphaNumeric3(event);"/>
				<span id="error3" style="color: Red; display: none"><br>* Special Characters not allowed</br></span>
				-
				<input onCopy="return false" onPaste="return false" name="CCM2" id="CCM2" type="text" maxlength="1" size="2" style="width:10%; text-transform:uppercase;" onkeypress="return IsAlphaNumeric9(event,this);" onChange="this.value = this.value.toUpperCase();"/>
								<!-- <span id="error11" style="color: Red; display: none"><br>* Special Characters not allowed</br></span> -->
			</div>
		</div>


		<div class="field" id="reg_no_field_n">
				<div class="registration-label">
					<label for="registration-no" class="registration-title">SSM Registration No.:</label>
				</div>
				<div class="firm-no input-field">
				<input name="CCM1_N" id="CCM1_N" type="text" maxlength="12" size="10" style="width:55%; text-transform:uppercase;" onkeypress="return IsAlphaNumeric3(event);" onChange="this.value = this.value.toUpperCase();" /> <span id="error" style="color: Red; display: none"><br><br>* Special Characters not allowed</br></br></span>
				</div>
		</div>
		
		<div class="field">
			<div class="registration-label">
				<label for="registration-company-name" class="registration-title">Company Name:</label>
			</div>
			<div class="company-name input-field">
				<input id="companyName" name="companyName" type="text" size="77" style="text-transform:uppercase;" onkeypress="return IsAlphaNumeric2(event);" onChange="this.value = this.value.toUpperCase();" /> <span id="error2" style="color: Red; display: none"><br>* Special Characters not allowed</br></span>
			</div>					
		</div>
		
		<div class="field">
			<div class="registration-label">
			<label for="registration-company-add" class="registration-title">Registered Address:<br /> (as per SSM registration)</label>
			</div>
			<div class="registered-address input-field">
				<input id="address1" name="address1" maxlength="40" type="text" size="77" style="text-transform:uppercase;" onChange="this.value = this.value.toUpperCase();"><br/>
				<input id="address2" name="address2" maxlength="40" type="text" size="77" style="text-transform:uppercase;" onChange="this.value = this.value.toUpperCase();"><br/>
				<input id="address3" name="address3" maxlength="40" type="text" size="77" style="text-transform:uppercase;" onChange="this.value = this.value.toUpperCase();">
			</div>					
		</div>
		<div class="field">
			<div class="registration-label">
				<label for="registration-postcode" class="registration-title">Postcode:</label>
			</div>
			<div class="postcode input-field">
				<input id="postalCode" name="postalCode" class="required digits valid" maxlength="5" onChange="this.value = this.value.toUpperCase();">
			</div>
		</div>
		
		<div class="field">
			<div class="registration-label">
						<label for="registration-state" class="registration-title">State:</label>
			</div>
			<div class="state input-field">
			<select  id='state' name='state' class='state'>
<option value=''>- PLEASE SELECT -</option>
<option id='001' value='J' >JOHOR&nbsp;&nbsp;&nbsp;</option>
<option id='002' value='K' >KEDAH&nbsp;&nbsp;&nbsp;</option>
<option id='003' value='D' >KELANTAN&nbsp;&nbsp;&nbsp;</option>
<option id='004' value='M' >MELAKA&nbsp;&nbsp;&nbsp;</option>
<option id='005' value='N' >NEGERI SEMBILAN&nbsp;&nbsp;&nbsp;</option>
<option id='006' value='C' >PAHANG&nbsp;&nbsp;&nbsp;</option>
<option id='008' value='A' >PERAK&nbsp;&nbsp;&nbsp;</option>
<option id='009' value='R' >PERLIS&nbsp;&nbsp;&nbsp;</option>
<option id='007' value='P' >PULAU PINANG&nbsp;&nbsp;&nbsp;</option>
<option id='012' value='S' >SABAH&nbsp;&nbsp;&nbsp;</option>
<option id='013' value='SK' >SARAWAK&nbsp;&nbsp;&nbsp;</option>
<option id='010' value='B' >SELANGOR&nbsp;&nbsp;&nbsp;</option>
<option id='011' value='T' >TERENGGANU&nbsp;&nbsp;&nbsp;</option>
<option id='014' value='W' >WILAYAH PERSEKUTUAN&nbsp;&nbsp;&nbsp;</option>
<option id='015' value='LA' >WILAYAH PERSEKUTUAN LABUAN&nbsp;&nbsp;&nbsp;</option>
<option id='016' value='PJ' >WILAYAH PERSEKUTUAN PUTRAJAYA&nbsp;&nbsp;&nbsp;</option>
</select>
			</div>
		</div>
	
		<div class="field">
			<div class="registration-label">
				<label for="registration-phone-no" class="registration-title">Telephone No (company):</label>
			</div>
			<div class="telephone input-field">
				<input id="companyContactNo" name="companyContactNo" type="text" size="20" onkeypress="return IsAlphaNumeric3(event);" onChange="this.value = this.value.toUpperCase();" /> <span id="error3" style="color: Red; display: none"><br>* Special Characters not allowed</br></span>
			</div>
		</div>
	
		<div class="field">
			<div class="registration-label">
				<label for="registration-fax-no" class="registration-title">Fax No (company):</label>
			</div>
			<div class="fax-no input-field">
				<input id="companyFaxNo" name="companyFaxNo" type="text" size="20" onkeypress="return IsAlphaNumeric4(event);" onChange="this.value = this.value.toUpperCase();" /> <span id="error4" style="color: Red; display: none"><br>* Special Characters not allowed</br></span>
			</div>
		</div>
	
		<hr width="100%">
	
		<div class="field">
			<div class="registration-label">
				<label for="registration-correspondence-add" class="registration-title">Correspondence Address:</label><br/>
							</div>
			<div class="correspondence input-field">
				<input id="caddress1" name="caddress1" maxlength="40" type="text" size="77" style="text-transform:uppercase;" onChange="this.value = this.value.toUpperCase();"><br/>
				<input id="caddress2" name="caddress2" maxlength="40" type="text" size="77" style="text-transform:uppercase;" onChange="this.value = this.value.toUpperCase();"><br/>
				<input id="caddress3" name="caddress3" maxlength="40" type="text" size="77" style="text-transform:uppercase;" onChange="this.value = this.value.toUpperCase();">
			</div>
		</div>
	
		<div class="field">
			<div class="registration-label">
				<label for="registration-postcode" class="registration-title">Postcode:</label>
			</div>
			<div class="postcode input-field">
				<input id="cpostalCode" name="cpostalCode" class="required digits valid" maxlength="5" onChange="this.value = this.value.toUpperCase();">
			</div>
		</div>
	
		<div class="field">
			<div class="registration-label">
				<label for="registration-state" class="registration-title">State:</label>
			</div>
			<div class="state input-field">
			<select  id='cstate' name='cstate' class='state'>
<option value=''>- PLEASE SELECT -</option>
<option id='001' value='J' >JOHOR&nbsp;&nbsp;&nbsp;</option>
<option id='002' value='K' >KEDAH&nbsp;&nbsp;&nbsp;</option>
<option id='003' value='D' >KELANTAN&nbsp;&nbsp;&nbsp;</option>
<option id='004' value='M' >MELAKA&nbsp;&nbsp;&nbsp;</option>
<option id='005' value='N' >NEGERI SEMBILAN&nbsp;&nbsp;&nbsp;</option>
<option id='006' value='C' >PAHANG&nbsp;&nbsp;&nbsp;</option>
<option id='008' value='A' >PERAK&nbsp;&nbsp;&nbsp;</option>
<option id='009' value='R' >PERLIS&nbsp;&nbsp;&nbsp;</option>
<option id='007' value='P' >PULAU PINANG&nbsp;&nbsp;&nbsp;</option>
<option id='012' value='S' >SABAH&nbsp;&nbsp;&nbsp;</option>
<option id='013' value='SK' >SARAWAK&nbsp;&nbsp;&nbsp;</option>
<option id='010' value='B' >SELANGOR&nbsp;&nbsp;&nbsp;</option>
<option id='011' value='T' >TERENGGANU&nbsp;&nbsp;&nbsp;</option>
<option id='014' value='W' >WILAYAH PERSEKUTUAN&nbsp;&nbsp;&nbsp;</option>
<option id='015' value='LA' >WILAYAH PERSEKUTUAN LABUAN&nbsp;&nbsp;&nbsp;</option>
<option id='016' value='PJ' >WILAYAH PERSEKUTUAN PUTRAJAYA&nbsp;&nbsp;&nbsp;</option>
</select>
			</div>
		</div>
		
		<!--<hr width="100%">
		<p class="hr-note top">The details of the following section must be of an employee of Human Resource or Management from the applying company <u>ONLY</u>.</p> -->
		<hr width="100%">
		<p class="hr-note">Note: The person assigned as the contact information will be contacted by Immigration officers on all matters related to the company registration. It is advisable to assign it to the person who created this account with ESD who is knowledgeable about the company information.</p>
		<div class="field">
			<div class="registration-label">
				<label for="registration-contact-person" class="registration-title">First Name:</label>
			</div>
			<div class="first-name input-field">
				<input id="firstName" name="firstName" type="text" size="50" style="text-transform:uppercase;" onkeypress="return IsAlphaNumeric5(event);" onChange="this.value = this.value.toUpperCase();" /> <span id="error5" style="color: Red; display: none"><br>* Special Characters not allowed</br></span>
			</div>
		</div>
		<div class="field">
			<div class="registration-label">
				<label for="registration-contact-person" class="registration-title">Last Name:</label>
			</div>
			<div class="last-name input-field">
				<input id="lastName" name="lastName" type="text" size="50" style="text-transform:uppercase;" onkeypress="return IsAlphaNumeric6(event);" onChange="this.value = this.value.toUpperCase();" /> <span id="error6" style="color: Red; display: none"><br>* Special Characters not allowed</br></span>
			</div>
		</div>
		<div class="field">
			<div class="registration-label">
				<label for="registration-designation" class="registration-title">Designation:</label>
			</div>
			<div class="designation input-field">
				<input id="designation" name="designation" type="text" size="50" style="text-transform:uppercase;" onChange="this.value = this.value.toUpperCase();">
			</div>
		</div>
		<div class="field">
			<div class="registration-label">
				<label for="registration-contact-no" class="registration-title">Contact No. (Fixed Line):</label>
			</div>
			<div class="contact-no input-field">
				<input id="contactNo" name="contactNo" type="text" size="20" onkeypress="return IsAlphaNumeric7(event);" onChange="this.value = this.value.toUpperCase();" /> <span id="error7" style="color: Red; display: none"><br>* Special Characters not allowed</br></span>
			</div>
		</div>
		<div class="field">
			<div class="registration-label">
				<label for="registration-contact-no" class="registration-title">Contact No. (Mobile):</label>
			</div>
			<div class="monbile-contact input-field">
				<input id="mobileNo" name="mobileNo" type="text" size="20" style="text-transform:uppercase;" onkeypress="return IsAlphaNumeric8(event);" onChange="this.value = this.value.toUpperCase();" /> <span id="error8" style="color: Red; display: none"><br>* Special Characters not allowed</br></span>
			</div>
		</div>
	
		<div class="field">
			<div class="registration-label">
				<label for="registration-email" class="registration-title">Email:</label>
			</div>
			<div class="email input-field">
				<input id="email" name="email" type="text" size="50" style="text-transform:lowercase;" onChange="return checkEmail(event);" onChange="this.value = this.value.toLowerCase();" /> <span id="error9" style="color: Red; display: none"><br>* Please provide valid email address</br></span>
			</div>
		</div>
		<div class="field">
			<div class="registration-label">
				<label for="registration-email" class="registration-title">Confirm Email:</label>
			</div>
			<div class="confirm-email input-field">
				<input id="email2" name="email2" type="text" size="50" style="text-transform:lowercase;" onChange="return checkEmail(event);" onChange="this.value = this.value.toLowerCase();" /> <span id="error10" style="color: Red; display: none"><br>* Please provide valid email address</br></span>
			</div>
		</div>
		
		<hr width="100%">
		<p class="hr-note"> Kindly create the login ID for the company. (<i>You can only create one login ID for the company, and this login ID will be permanent for the company</i>)</p>
		
		<div class="field">
			<div class="registration-label">
				<label for="registration-id" class="registration-title">Username:</label>
			</div>
			<div class="username input-field">
				<input id="userName" name="userName" type="text" size="30" style="text-transform:lowercase;" onChange="this.value = this.value.toLowerCase();" />
			</div>
		</div>
	
		<div class="field">
			<div class="registration-label">
				<label for="registration-password" class="registration-title">Password:</label>
			</div>
			<div class="password input-field">
				<input id="password1" name="password1" type="password" size="20">
			</div>
		</div>
		
		<div class="field">
			<div class="registration-label">
				<label for="registration-confirm-password" class="registration-title">Confirm Password:</label>
			</div>
			<div class="confirm-pasword input-field">
				<input id="password2" name="password2" type="password" size="20">
			</div>
		</div>
	 
		<div class="field">   
			<div class="registration-label"> 
				<label for="registration-confirm-password" class="registration-title">Captcha:</label>
			</div>
			<div class="captcha input-field">
            	<img src="https://esd.imi.gov.my/esd/extensions/captcha/captcha.php" id="captcha" /><br>
							<a href="javascript:void();" onClick="
							    document.getElementById('captcha').src='https://esd.imi.gov.my/esd/extensions/captcha/captcha.php?'+Math.random();
							    document.getElementById('captcha-form').focus();"
							    id="change-image">Not readable? Change text.</a><br>
								<input type="text" name="captchaVerification" id="captchaVerification" autocomplete="off" />
			</div>
		</div>

		<button type="button" class="create-acc" onClick="javascript:submitRegistration();">Create Account</button>

</div>

<div class="step-two" style="display: none;">
	<h1>Company Account Registration (Step 2 of 6)</h1>
	<p>We have email the activation link to your registered email address.<br/>Kindly login to your email account and click on the activation link to activate your account.</p>
</div> 

<script type="text/javascript">
	function submitRegistration(){
		$.ajax({
			type: 'POST',
			url: '/esd/controllers/RegistrationController.php',
			data: $('#frmRegister').serialize(),
			async: false,
			success: function(data){
				switch(data){
					case "1":
						$(location).attr('href',"success.html");
						break;
					default:
						$(".errorSummary").show();
						$(".errorSummary").html(data);
						$("html, body").animate({scrollTop:$(".errorSummary").offset().top - 20}, 'slow');
						//alert('Error occurred. Please contact ESD System Administrator.');
						break;
					}
					
				return;
			},
			error: function(){
				alert('Error occurred. Please contact ESD System Administrator.');
			}
		});
	}

	// ***** Function copyAddress *****
	function chkAddress(p_val) {
		if (p_val) {
			document.frmRegister.CADDR1.value = document.frmRegister.ADDR1.value;
			document.frmRegister.CADDR2.value = document.frmRegister.ADDR2.value;
			document.frmRegister.CADDR3.value = document.frmRegister.ADDR3.value;
			document.frmRegister.CPOSTCODE.value = document.frmRegister.POSTCODE.value;
			document.frmRegister.CSTATE.value = document.frmRegister.STATE.value;
		} //if
	} // function
	
	// ***** Datepicker *****
	$(function() {
		$("#ccmRegDate").datepicker({
			changeMonth: true,
			changeYear: true,
			dateFormat: "dd/mm/yy",
			yearRange: "-100:+0",
			maxDate: 0
		});
	});

	$('.ccmRegDate').datepicker()
        .on('changeDate', function(e){
          check_date();
    });
</script>

<script type="text/javascript">
var specialKeys = new Array();
	specialKeys.push(8); //Backspace
	specialKeys.push(9); //Tab
	specialKeys.push(46); //Delete
	specialKeys.push(36); //Home
	specialKeys.push(35); //End
	specialKeys.push(37); //Left
	specialKeys.push(39); //Right


	//Checking for company name
	function IsAlphaNumeric2(e) {
		var keyCode = e.keyCode == 0 ? e.charCode : e.keyCode;
		var ret = ((keyCode == 38) || (keyCode == 47) || (keyCode == 40) || (keyCode == 41) || (keyCode == 45) || (keyCode == 32) || (keyCode >= 48 && keyCode <= 57) || (keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122) || (specialKeys.indexOf(e.keyCode) != -1 && e.charCode != e.keyCode));
		document.getElementById("error2").style.display = ret ? "none" : "inline";
		return ret;
	}	

	//checking for tel number
	function IsAlphaNumeric3(e) {
		var keyCode = e.keyCode == 0 ? e.charCode : e.keyCode;
		var ret = ((keyCode >= 48 && keyCode <= 57) || (specialKeys.indexOf(e.keyCode) != -1 && e.charCode != e.keyCode));
		document.getElementById("error3").style.display = ret ? "none" : "inline";
		return ret;
	}

	//checking for fax no
	function IsAlphaNumeric4(e) {
		var keyCode = e.keyCode == 0 ? e.charCode : e.keyCode;
		var ret = ((keyCode >= 48 && keyCode <= 57) || (specialKeys.indexOf(e.keyCode) != -1 && e.charCode != e.keyCode));
		document.getElementById("error4").style.display = ret ? "none" : "inline";
		return ret;
	}

	//checking for first name
	function IsAlphaNumeric5(e) {
		var keyCode = e.keyCode == 0 ? e.charCode : e.keyCode;
		var ret = ((keyCode == 32) || (keyCode == 39) || (keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122) || (specialKeys.indexOf(e.keyCode) != -1 && e.charCode != e.keyCode));
		document.getElementById("error5").style.display = ret ? "none" : "inline";
		return ret;
	}

	//checking for last name
	function IsAlphaNumeric6(e) {
		var keyCode = e.keyCode == 0 ? e.charCode : e.keyCode;
		var ret = ((keyCode == 32) || (keyCode == 39) || (keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122) || (specialKeys.indexOf(e.keyCode) != -1 && e.charCode != e.keyCode));
		document.getElementById("error6").style.display = ret ? "none" : "inline";
		return ret;
	}
	//checking for contc number fixed line
	function IsAlphaNumeric7(e) {
		var keyCode = e.keyCode == 0 ? e.charCode : e.keyCode;
		var ret = ((keyCode >= 48 && keyCode <= 57) || (specialKeys.indexOf(e.keyCode) != -1 && e.charCode != e.keyCode));
		document.getElementById("error7").style.display = ret ? "none" : "inline";
		return ret;
	}

	//checking for contact number mobile
	function IsAlphaNumeric8(e) {
		var keyCode = e.keyCode == 0 ? e.charCode : e.keyCode;
		var ret = ((keyCode >= 48 && keyCode <= 57) || (specialKeys.indexOf(e.keyCode) != -1 && e.charCode != e.keyCode));
		document.getElementById("error8").style.display = ret ? "none" : "inline";
		return ret;
	}
	
	//checking only allow alphabets //new add 11/3/2015
	function IsAlphaNumeric9(e, t) {
		try {
			if (window.event) {
				var charCode = window.event.keyCode;
			}
			else if (e) {
				var charCode = e.which;
			}
			else { return true; }
			if ((charCode > 64 && charCode < 91) || (charCode > 96 && charCode < 123))
				return true;
			else
				return false;
		}
		catch (err) {
			alert(err.Description);
		}
	}
	
	$(document).ready(function () {
		$('#CCM1').bind('copy paste', function (e) {
			e.preventDefault();
		});
	});
	
	$(document).ready(function () {
		$('#CCM2').bind('copy paste', function (e) {
			e.preventDefault();
		});
	});

	$(document).ready(function () {
		$('#CCM1_N').bind('copy paste', function (e) {
			e.preventDefault();
		});
	});


	$(document).ready(function () {
		$("#reg_no_field_n").hide();
	});


	function check_date(){
		var ssm_reg_date = 20191011;
		var ccmRegDate = $("#ccmRegDate").val();

		var x = formatDate (ccmRegDate);
		if(x> ssm_reg_date){
			$("#reg_no_field_n").show();
			$("#reg_no_field").hide();
		} else {
			$("#reg_no_field_n").hide();
			$("#reg_no_field").show();
		}

	}


	function formatDate (input) {
	  var datePart = input.match(/\d+/g),
	  month = datePart[0], // get only two digits
	  day = datePart[1], year = datePart[2];

	  return year+month+day;
	}
	
</script>

<script type="text/javascript">

function checkEmail() {

    var email = document.getElementById('email');
    var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

    if (!filter.test(email.value)) {
    //alert('Please provide a valid email address');
    document.getElementById("error9").style.display = "inline";
    email.focus;
    return false;
 }
 	var email = document.getElementById('email2');
    var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

     if (!filter.test(email.value)) {
    //alert('Please provide a valid email address');
    document.getElementById("error10").style.display = "inline";
    email.focus;
    return false;
 }
}</script>
